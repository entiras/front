{"hola":"saludos","min":{"error":{"message":"Unexpected token: operator «>»","filename":"0","line":67,"col":26,"pos":1486}},"txt":"// loader message\nvar loader = {};\nloader.active = false;\nloader.show = function () {\n    loader.active = true;\n    setTimeout(loader.wait, 500);\n};\nloader.hide = function () {\n    loader.active = false;\n    $('#loader').addClass('d-none');\n};\nloader.wait = function () {\n    if (loader.active) {\n        $('#loader').removeClass('d-none');\n    }\n}\n// check if logged\nvar login = {};\nlogin.logged = false;\nlogin.check = function () {\n    var cookie = Cookies.get('user');\n    if (cookie === undefined) {\n        login.logged = false;\n    } else {\n        login.logged = true;\n        $('#username').text(cookie);\n    }\n    login.checked();\n};\nlogin.checked = function () {\n    if (login.logged) {\n        content.logged();\n    } else {\n        content.guest();\n    }\n};\n// show content\nvar content = {};\ncontent.logged = function () {\n    $('.logged').removeClass('d-none');\n};\ncontent.guest = function () {\n    $('.guest').removeClass('d-none');\n};\n// actions\nvar actions = {};\nactions.failed = function () {\n    $('#network-err').removeClass('d-none');\n};\nactions.csrf = function (callback) {\n    $.ajax({\n        type: 'GET',\n        url: '/api/csrf',\n        success: callback,\n        error: actions.failed\n    });\n};\nactions.form = function (id) {\n    var arr = $(id).serializeArray();\n    var data = {};\n    for (var i = 0; i < arr.length; i++) {\n        data[arr[i].name] = arr[i].value;\n    }\n    return data;\n};\nactions.redirect = function (route) {\n    setTimeout((destiny) => {\n        window.location.href = destiny;\n    }, 500, route);\n}\nactions.logout = function () {\n    actions.csrf((data) => {\n        $('input[name=_csrf]').val(data.token);\n        var input = actions.form('#logout');\n        $.ajax({\n            type: 'POST',\n            url: '/api/logout',\n            data: input,\n            error: actions.failed,\n            success: (res) => {\n                actions.redirect('/');\n            }\n        });\n    });\n};\nactions.login = function (event) {\n    event.preventDefault();\n    $('#login :submit').prop('disabled', true);\n    $('.alert').addClass('d-none');\n    $('input').removeClass('is-invalid');\n    actions.csrf((data) => {\n        $('input[name=_csrf]').val(data.token);\n        var input = actions.form('#login');\n        $.ajax({\n            type: 'POST',\n            url: '/api/login',\n            data: input,\n            error: actions.failed,\n            success: (res) => {\n                $('#login :submit').prop('disabled', false);\n                if (res.message === 'validation') {\n                    var field = res.error.field;\n                    var val = res.error.validation;\n                    $('#' + field + '-' + val).removeClass('d-none');\n                    $('input[name=' + field + ']').addClass('is-invalid');\n                } else if (res.message === 'credentials') {\n                    $('#credentials').removeClass('d-none');\n                    $('input[name=username]').addClass('is-invalid');\n                    $('input[name=password]').addClass('is-invalid');\n                } else if (res.message === 'unconfirmed') {\n                    $('#unconfirmed').removeClass('d-none');\n                } else if (res.message === 'logged') {\n                    $('#logged').removeClass('d-none');\n                    actions.redirect('/');\n                }\n            }\n        });\n    });\n};\nactions.signup = function (event) {\n    event.preventDefault();\n    $('#signup :submit').prop('disabled', true);\n    $('.alert').addClass('d-none');\n    $('input').removeClass('is-invalid');\n    actions.csrf((data) => {\n        $('input[name=_csrf]').val(data.token);\n        var input = actions.form('#signup');\n        $.ajax({\n            type: 'POST',\n            url: '/api/signup',\n            data: input,\n            error: actions.failed,\n            success: (res) => {\n                $('#signup :submit').prop('disabled', false);\n                if (res.message === 'validation') {\n                    var field = res.error.field;\n                    var val = res.error.validation;\n                    $('#' + field + '-' + val).removeClass('d-none');\n                    $('input[name=' + field + ']').addClass('is-invalid');\n                } else if (res.message === 'url') {\n                    $('#username-url').removeClass('d-none');\n                    $('input[name=username]').addClass('is-invalid');\n                } else if (res.message === 'clone') {\n                    $('#clone').removeClass('d-none');\n                    $('input[name=username]').addClass('is-invalid');\n                    $('input[name=email]').addClass('is-invalid');\n                } else if (res.message === 'sent') {\n                    $('#sent').removeClass('d-none');\n                    actions.redirect('/signup/confirm/');\n                }\n            }\n        });\n    });\n};\nactions.confirm = function (event) {\n    event.preventDefault();\n    $('#confirm :submit').prop('disabled', true);\n    $('.alert').addClass('d-none');\n    $('input').removeClass('is-invalid');\n    actions.csrf((data) => {\n        $('input[name=_csrf]').val(data.token);\n        var input = actions.form('#confirm');\n        $.ajax({\n            type: 'POST',\n            url: '/api/signup/confirm',\n            data: input,\n            error: actions.failed,\n            success: (res) => {\n                $('#confirm :submit').prop('disabled', false);\n                if (res.type === 'danger') {\n                    $('input[name=token]').addClass('is-invalid');\n                } else {\n                    actions.redirect('/login/');\n                }\n                $('#' + res.message).removeClass('d-none');\n            }\n        });\n    });\n}\nactions.resend = function (event) {\n    event.preventDefault();\n    $('#resend :submit').prop('disabled', true);\n    $('.alert').addClass('d-none');\n    $('input').removeClass('is-invalid');\n    actions.csrf((data) => {\n        $('input[name=_csrf]').val(data.token);\n        var input = actions.form('#resend');\n        $.ajax({\n            type: 'POST',\n            url: '/api/signup/resend',\n            data: input,\n            error: actions.failed,\n            success: (res) => {\n                $('#resend :submit').prop('disabled', false);\n                if (res.message === 'required' || res.message === 'email') {\n                    $('input[name=email]').addClass('is-invalid');\n                } else if (res.message === 'captcha') {\n                    $('input[name=captcha]').addClass('is-invalid');\n                }\n                $('#' + res.message).removeClass('d-none');\n                if (res.message === 'sent') {\n                    actions.redirect('/signup/confirm/');\n                }\n                if (res.message !== 'sent') {\n                    $('#_captcha').attr(\"src\", \"/api/captcha?\" + Math.random());\n                }\n            }\n        });\n    });\n}\nactions.forgot = function (event) {\n    event.preventDefault();\n    $('#forgot :submit').prop('disabled', true);\n    $('.alert').addClass('d-none');\n    $('input').removeClass('is-invalid');\n    actions.csrf((data) => {\n        $('input[name=_csrf]').val(data.token);\n        var input = actions.form('#forgot');\n        $.ajax({\n            type: 'POST',\n            url: '/api/login/forgot',\n            data: input,\n            error: actions.failed,\n            success: (res) => {\n                $('#forgot :submit').prop('disabled', false);\n                if (res.message === 'required' || res.message === 'email') {\n                    $('input[name=email]').addClass('is-invalid');\n                } else if (res.message === 'captcha') {\n                    $('input[name=captcha]').addClass('is-invalid');\n                }\n                $('#' + res.message).removeClass('d-none');\n                if (res.message === 'sent') {\n                    actions.redirect('/login/reset/');\n                }\n                if (res.message !== 'sent') {\n                    $('#_captcha').attr(\"src\", \"/api/captcha?\" + Math.random());\n                }\n            }\n        });\n    });\n}\nactions.reset = function (event) {\n    event.preventDefault();\n    $('#reset :submit').prop('disabled', true);\n    $('.alert').addClass('d-none');\n    $('input').removeClass('is-invalid');\n    actions.csrf((data) => {\n        $('input[name=_csrf]').val(data.token);\n        var input = actions.form('#reset');\n        console.log(input);\n        $.ajax({\n            type: 'POST',\n            url: '/api/login/reset',\n            data: input,\n            error: actions.failed,\n            success: (res) => {\n                $('#reset :submit').prop('disabled', false);\n                if (res.type !== 'danger') {\n                    actions.redirect('/login/');\n                }\n                if (res.message === 'required' || res.message === 'min') {\n                    $('input[name=password]').addClass('is-invalid');\n                } else if (res.message === 'invalid') {\n                    $('input[name=token]').addClass('is-invalid');\n                }\n                $('#' + res.message).removeClass('d-none');\n            }\n        });\n    });\n}\n$(document).ready(function () {\n    login.check();\n});\n$.ajaxSetup({\n    beforeSend: loader.show,\n    complete: loader.hide\n});","otro":"otro"}